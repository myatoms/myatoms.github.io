<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hydrogen Atom Masterclass</title>
<script src="https://3Dmol.org/build/3Dmol-min.js"></script>
<style>
body {margin:0;padding:0;overflow:hidden;font-family:sans-serif;background:#000;color:white;}
#viewer{position:absolute;top:0;left:0;width:100%;height:calc(100% - 300px);}
#info{position:absolute;bottom:0;left:0;width:100%;height:300px;background:rgba(34,34,34,0.8);color:white;padding:20px;box-sizing:border-box;overflow-y:auto;box-shadow:0 -5px 15px rgba(0,0,0,0.5);}
.toggle{margin-right:15px;}
h2{color:#ffd700;margin-top:0;}
p{line-height:1.5;}
</style>
</head>
<body>
<div id="viewer"></div>
<div id="info">
<div>
<label class="toggle"><input type="checkbox" id="showLabels" checked> Show Labels</label>
<label class="toggle"><input type="checkbox" id="showOrbit" checked> Show Orbit</label>
<label class="toggle"><input type="checkbox" id="showQuarks"> Show Quarks</label>
</div>
<h2>Hydrogen Atom Masterclass</h2>
<p><strong>Hydrogen (H)</strong> â€“ The simplest and most abundant element in the universe...</p>
</div>

<script>
const viewer = $3Dmol.createViewer("viewer",{backgroundColor:"black"});

// Static proton & orbit
viewer.addSphere({center:{x:0,y:0,z:0}, radius:0.3, color:"red", alpha:0.6, wireframe:true});
if(document.getElementById("showOrbit").checked){
  const segments=50, points=[];
  for(let i=0;i<=segments;i++){ let t=2*Math.PI*(i/segments); points.push({x:1.2*Math.cos(t),y:1.2*Math.sin(t),z:0}); }
  viewer.addCurve({points,color:"#fff",linewidth:2});
}
if(document.getElementById("showLabels").checked){
  viewer.addLabel("Proton",{position:{x:0,y:0.5,z:0},backgroundColor:"red",fontColor:"white",fontSize:14});
}

// Dynamic objects
let electronTheta=0;
let electronSphere=null;
let electronLabel=null;
let quarks=[], quarkSpheres=[], quarkLabels=[];

// Initialize quarks
function initQuarks(){
  quarks=[], quarkSpheres=[], quarkLabels=[];
  if(!document.getElementById("showQuarks").checked) return;
  const qColors=["#ff0000","#00ff00","#0000ff"];
  const qPositions=[{x:0.1,y:0.1,z:0},{x:-0.1,y:0.1,z:0},{x:0,y:-0.1,z:0}];
  for(let i=0;i<3;i++){
    quarks.push({x:qPositions[i].x,y:qPositions[i].y,z:qPositions[i].z,color:qColors[i]});
  }
}

// Update & render dynamic shapes
function renderDynamic(){
  // Electron
  electronTheta+=0.03;
  const ex=1.2*Math.cos(electronTheta), ey=1.2*Math.sin(electronTheta);
  if(electronSphere) viewer.removeShape(electronSphere);
  electronSphere = viewer.addSphere({center:{x:ex,y:ey,z:0}, radius:0.15,color:"yellow"});
  if(document.getElementById("showLabels").checked){
    if(electronLabel) electronLabel.setPosition({x:ex+0.3,y:ey+0.3,z:0});
    else electronLabel=viewer.addLabel("Electron",{position:{x:ex+0.3,y:ey+0.3,z:0},backgroundColor:"yellow",fontColor:"black",fontSize:12});
  }

  // Quarks
  quarkSpheres.forEach(s=>viewer.removeShape(s));
  quarkSpheres=[];
  quarkLabels.forEach(l=>l&&l.setPosition({x:0,y:0,z:0})); // hide temporarily
  quarkLabels=[];
  if(document.getElementById("showQuarks").checked){
    quarks.forEach((q,i)=>{
      q.x+=(Math.random()-0.5)*0.01;
      q.y+=(Math.random()-0.5)*0.01;
      q.z+=(Math.random()-0.5)*0.01;
      quarkSpheres.push(viewer.addSphere({center:q,radius:0.1,color:q.color,alpha:0.8}));
      if(document.getElementById("showLabels").checked){
        quarkLabels.push(viewer.addLabel(q.color!="#0000ff"?"Up Quark":"Down Quark",{position:q,backgroundColor:q.color,fontColor:"white",fontSize:10}));
      } else quarkLabels.push(null);
    });
  }

  viewer.render();
  requestAnimationFrame(renderDynamic);
}

// Toggle handlers
["showLabels","showOrbit","showQuarks"].forEach(id=>{
  document.getElementById(id).addEventListener("change", ()=>{
    viewer.removeAllShapes();
    // rebuild proton & orbit
    viewer.addSphere({center:{x:0,y:0,z:0}, radius:0.3, color:"red", alpha:0.6, wireframe:true});
    if(document.getElementById("showOrbit").checked){
      const segments=50, points=[];
      for(let i=0;i<=segments;i++){ let t=2*Math.PI*(i/segments); points.push({x:1.2*Math.cos(t),y:1.2*Math.sin(t),z:0}); }
      viewer.addCurve({points,color:"#fff",linewidth:2});
    }
    if(document.getElementById("showLabels").checked){
      viewer.addLabel("Proton",{position:{x:0,y:0.5,z:0},backgroundColor:"red",fontColor:"white",fontSize:14});
    }
    initQuarks();
  });
});

// Init
initQuarks();
renderDynamic();
viewer.zoomTo();
</script>
</body>
</html>
