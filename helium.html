<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Helium Atom Masterclass</title>
  <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
  <!-- Google Fonts: Alsina as fallback -->
  <link href="https://fonts.googleapis.com/css2?family=Alsina&display=swap" rel="stylesheet">
  <style>
    @font-face {
      font-family: 'Alsina Ultrajada';
      src: url('Alsina Ultrajada.ttf') format('truetype'); /* Assume font file is in the same directory; adjust path and format if needed */
    }
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Alsina Ultrajada', 'Alsina', sans-serif; /* Use local font if available, fallback to Google Alsina */
      background: #000000;
      color: white;
    }
    #viewer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: calc(100% - 300px); /* Increased space for info */
    }
    #info {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 300px;
      background: rgba(34, 34, 34, 0.8); /* Semi-transparent for beauty */
      color: white;
      padding: 20px;
      box-sizing: border-box;
      font-size: 16px;
      overflow-y: auto; /* Scrollable for dense info */
      box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.5);
    }
    .toggle {
      margin-right: 15px;
    }
    h2 {
      color: #ffd700; /* Gold for headings */
      margin-top: 0;
    }
    p {
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div id="viewer"></div>

  <div id="info">
    <div>
      <label class="toggle"><input type="checkbox" id="showLabels" checked> Show Labels</label>
      <label class="toggle"><input type="checkbox" id="showOrbit" checked> Show Orbit</label>
      <label class="toggle"><input type="checkbox" id="showNucleons"> Show Nucleons</label>
    </div>
    <h2>Helium Atom Masterclass</h2>
    <p><strong>Helium (He)</strong> – The second lightest and second most abundant element in the universe, known for its low density and inertness. With atomic number 2, it consists of two protons and typically two neutrons in the nucleus, orbited by two electrons in its ground state, as depicted in the classic Bohr model visualization above.</p>
    <p><strong>Atomic Structure:</strong> Helium's atom is very light, with an atomic mass of about 4.0026 u. The nucleus, positively charged, contains two protons and two neutrons, while the negatively charged electrons occupy probabilistic orbitals, simplified here as a circular path for educational purposes. In reality, quantum mechanics describes the electrons in a spherical 1s orbital, forming a closed shell.</p>
    <p><strong>Isotopes:</strong> Helium has two stable isotopes: ^4He (99.99986% abundance) with two neutrons, and ^3He (trace amounts, 0.00014%) with one neutron. ^3He is primordial and from tritium decay. Other isotopes are radioactive with short half-lives.</p>
    <p><strong>Physical Properties:</strong> Colorless, odorless, tasteless monatomic gas at standard conditions. Boiling point: -268.9°C (4.2 K), melting point: does not solidify at atmospheric pressure. Density: 0.1786 g/L (gas). Lowest boiling point of any element; remains liquid at absolute zero under normal pressure.</p>
    <p><strong>Chemical Properties:</strong> Extremely unreactive noble gas due to full electron shell. Forms no true chemical compounds, but excimers like He₂ and van der Waals molecules exist. Can form clathrates with water under pressure.</p>
    <p><strong>History:</strong> Discovered spectroscopically by Pierre Janssen and Norman Lockyer in 1868 in the sun's spectrum. Isolated on Earth by William Ramsay in 1895 from cleveite mineral. Named from Greek "helios" meaning sun.</p>
    <p><strong>Abundance and Production:</strong> Second most abundant in the universe (~24% by mass), formed in Big Bang nucleosynthesis. On Earth, rare in atmosphere (5.24 ppm), extracted from natural gas where it accumulates from alpha decay. Produced commercially by fractional distillation of natural gas.</p>
    <p><strong>Uses:</strong> Filling balloons and airships (buoyancy), cryogenics (cooling superconductors in MRI machines), inert atmosphere for welding and semiconductor production, breathing gas in deep-sea diving (heliox), leak detection, and rocketry purge gas.</p>
    <p><strong>Astrophysical Role:</strong> Produced in Big Bang and stellar hydrogen fusion. Key tracer in cosmology. Abundant in stars, gas giants, and nebulae. ^3He/^4He ratio informs on stellar processes.</p>
    <p><strong>Quantum Significance:</strong> The helium atom is one of the few exactly solvable multi-electron systems (with approximations). Exhibits superfluidity in ^4He below 2.17 K (lambda point) and in ^3He at millikelvin temperatures. Bose-Einstein condensation observed in dilute gases.</p>
    <p><strong>Biological Importance:</strong> Non-toxic and inert, no essential biological role. Used in medical imaging (MRI cooling) and respiratory mixtures to reduce nitrogen narcosis in divers. Inhaling changes voice pitch due to lower density.</p>
    <p><strong>Fun Facts:</strong> Helium is the only element discovered in space before on Earth. It doesn't freeze at absolute zero without pressure. The U.S. National Helium Reserve supplies much of the world's helium. Inhaling helium makes your voice squeaky. Used in the Large Hadron Collider.</p>
  </div>

  <script>
    let viewer = $3Dmol.createViewer("viewer", { backgroundColor: "black", antialias: false });

    let electrons = [];
    let electronLabels = [];
    let nucleonShapes = [];
    let theta = 0;
    let frameCount = 0;
    const jiggleInterval = 5;

    const electronRadius = 1.0;
    const numElectrons = 2;
    const nucleusRadius = 0.3;
    const nucleonRadius = 0.08;
    const numProtons = 2;
    const numNeutrons = 2;
    const nucleonColors = Array(numProtons).fill("#ff0000").concat(Array(numNeutrons).fill("#0000ff"));
    let nucleonBasePositions = [];
    for (let i = 0; i < numProtons + numNeutrons; i++) {
      let angle = 2 * Math.PI * i / (numProtons + numNeutrons);
      let r = 0.1 * Math.random();
      nucleonBasePositions.push({
        x: r * Math.cos(angle),
        y: r * Math.sin(angle),
        z: 0
      });
    }

    // Function to add orbit path
    function addOrbit(radius) {
      const segments = 50;
      const points = [];
      for (let i = 0; i <= segments; i++) {
        let theta = 2 * Math.PI * (i / segments);
        points.push({x: radius * Math.cos(theta), y: radius * Math.sin(theta), z: 0});
      }
      return viewer.addCurve({ points: points, color: "#ffffff", linewidth: 1 });
    }

    // Function to add static labels
    function addStaticLabels() {
      viewer.addLabel("Nucleus", {position: {x:0, y:0.5, z:0}, backgroundColor: "red", fontColor: "white", fontSize: 14});
      if (document.getElementById("showNucleons").checked) {
        viewer.addLabel("Proton", {position: {x:0.1, y:0.3, z:0}, backgroundColor: "red", fontColor: "white", fontSize: 10});
        viewer.addLabel("Neutron", {position: {x: -0.1, y:0.3, z:0}, backgroundColor: "blue", fontColor: "white", fontSize: 10});
      }
    }

    // Build static elements
    function buildStatic() {
      viewer.removeAllShapes();
      viewer.removeAllLabels();
      electrons = [];
      electronLabels = [];
      nucleonShapes = [];

      // Add nucleus (semi-transparent for nucleons visibility)
      viewer.addSphere({ center: {x:0, y:0, z:0}, radius: nucleusRadius, color: "red", alpha: 0.6, wireframe: true });

      // Add orbit if checked
      if (document.getElementById("showOrbit").checked) {
        addOrbit(electronRadius);
      }

      // Add static labels if checked
      if (document.getElementById("showLabels").checked) {
        addStaticLabels();
      }

      viewer.render();
    }

    // Main render function for dynamic elements (electrons and nucleons)
    function renderScene() {
      // Remove old electrons and labels
      electrons.forEach(shape => viewer.removeShape(shape));
      electronLabels.forEach(label => viewer.removeLabel(label));
      electrons = [];
      electronLabels = [];

      // Add electrons
      for (let i = 0; i < numElectrons; i++) {
        let e_theta = theta + i * (2 * Math.PI / numElectrons);
        let ex = electronRadius * Math.cos(e_theta);
        let ey = electronRadius * Math.sin(e_theta);
        let electronShape = viewer.addSphere({ center: {x: ex, y: ey, z: 0}, radius: 0.15, color: "yellow" });
        electrons.push(electronShape);
      }

      // Add one electron label if labels are shown
      if (document.getElementById("showLabels").checked) {
        let ex = electronRadius * Math.cos(theta);
        let ey = electronRadius * Math.sin(theta);
        let electronLabel = viewer.addLabel("Electron", {position: {x: ex + 0.3, y: ey + 0.3, z:0}, backgroundColor: "yellow", fontColor: "black", fontSize: 12});
        electronLabels.push(electronLabel);
      }

      // Handle nucleons
      let showNucleons = document.getElementById("showNucleons").checked;
      if (!showNucleons) {
        nucleonShapes.forEach(shape => { if (shape !== null) viewer.removeShape(shape); });
        nucleonShapes = [];
      } else {
        let needUpdate = (frameCount % jiggleInterval === 0) || (nucleonShapes.length === 0);
        if (needUpdate) {
          nucleonShapes.forEach(shape => { if (shape !== null) viewer.removeShape(shape); });
          nucleonShapes = [];
          for (let i = 0; i < numProtons + numNeutrons; i++) {
            let dx = (Math.random() - 0.5) * 0.05;
            let dy = (Math.random() - 0.5) * 0.05;
            let dz = (Math.random() - 0.5) * 0.05;
            let pos = {x: nucleonBasePositions[i].x + dx, y: nucleonBasePositions[i].y + dy, z: nucleonBasePositions[i].z + dz};
            let nucleonShape = viewer.addSphere({ center: pos, radius: nucleonRadius, color: nucleonColors[i], alpha: 0.8 });
            nucleonShapes.push(nucleonShape);
          }
        }
        // else keep existing nucleons
      }

      viewer.render();
    }

    // Animation loop using requestAnimationFrame for smoother performance
    function animate() {
      theta += 0.03; // Slightly slower speed for less CPU load
      frameCount++;
      renderScene();
      requestAnimationFrame(animate);
    }

    // Event listeners for toggles
    const toggles = ["showLabels", "showOrbit", "showNucleons"];
    toggles.forEach(id => {
      document.getElementById(id).addEventListener("change", () => {
        buildStatic();
        renderScene(); // Re-add dynamic elements immediately
      });
    });

    // Initial setup
    buildStatic();
    viewer.zoomTo();
    animate();
  </script>
</body>
</html>
